<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Teacher Recruitment Form</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: auto;
    background: #f8f8f8;
    padding: 20px;
  }
  label { font-weight: bold; display: block; margin-top: 10px; }
  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 4px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  button {
    margin-top: 15px;
    background: green;
    color: white;
    padding: 12px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    border-radius: 6px;
  }
  button:hover { background: darkgreen; }
  .checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 6px;
  }
  .checkbox-group label {
    font-weight: normal;
    background: white;
    border: 1px solid #ccc;
    border-radius: 6px;
    padding: 6px 10px;
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
  }
  .checkbox-group input[type="checkbox"] {
    width: auto;
    margin: 0;
  }
  #message {
    margin-top: 15px;
    padding: 10px;
    display: none;
    border-radius: 6px;
  }
  #message.success { background: #d1fae5; color: #065f46; }
  #message.error { background: #fee2e2; color: #991b1b; }
</style>
</head>
<body>

<h2>Teacher Recruitment Form</h2>
<form id="teacherForm">
  <label>Full Name *</label>
  <input type="text" name="name" required>

  <label>Email *</label>
  <input type="email" name="email" required>

  <label>Phone Number *</label>
  <input type="tel" name="phone" required>

  <label>Type of School Graduated From *</label>
  <select name="schoolType" id="schoolType" required>
    <option value="">-- Select --</option>
    <option value="University">University</option>
    <option value="Polytechnic">Polytechnic</option>
  </select>

  <label>School Name *</label>
  <input type="text" name="schoolName" required>

  <label>Grade *</label>
  <select name="grade" id="grade" required>
    <option value="">-- Select Grade --</option>
  </select>

  <label>Subjects you can teach *</label>
  <div class="checkbox-group" id="subjectsList">
    <label><input type="checkbox" value="Mathematics"> Mathematics</label>
    <label><input type="checkbox" value="Physics"> Physics</label>
    <label><input type="checkbox" value="Engineering"> Engineering</label>
    <label><input type="checkbox" value="Further Mathematics"> Further Mathematics</label>
    <label><input type="checkbox" value="Other"> Other</label>
  </div>
  <input id="otherSubject" type="text" placeholder="Specify other subject" style="display:none; margin-top:6px;">

  <input type="hidden" name="subjects" id="subjectsInput" required>

  <label>Fee per hour (₦) *</label>
  <input type="number" name="fee" min="2000" max="4000" required>

  <label>CV (filename only for now) *</label>
  <input type="text" name="cv" placeholder="Enter CV filename" required>

  <button type="submit">Submit Application</button>
  <div id="message"></div>
</form>

<script>
  const gradeSelect = document.getElementById('grade');
  const schoolType = document.getElementById('schoolType');
  const checkboxes = document.querySelectorAll('#subjectsList input[type="checkbox"]');
  const otherInput = document.getElementById('otherSubject');
  const subjectsInput = document.getElementById('subjectsInput');
  const form = document.getElementById('teacherForm');
  const message = document.getElementById('message');

  // School type change → update grade options
  schoolType.addEventListener('change', () => {
    gradeSelect.innerHTML = '<option value="">-- Select Grade --</option>';
    if (schoolType.value === 'University') {
      ['First Class', 'Second Class Upper', 'Second Class Lower', 'Third Class'].forEach(g => {
        gradeSelect.innerHTML += `<option value="${g}">${g}</option>`;
      });
    } else if (schoolType.value === 'Polytechnic') {
      ['Distinction', 'Upper Credit', 'Lower Credit'].forEach(g => {
        gradeSelect.innerHTML += `<option value="${g}">${g}</option>`;
      });
    }
  });

  // Show/hide "Other" subject input
  checkboxes.forEach(cb => {
    cb.addEventListener('change', () => {
      if (cb.value === 'Other') {
        otherInput.style.display = cb.checked ? 'block' : 'none';
      }
      updateSubjects();
    });
  });
  otherInput.addEventListener('input', updateSubjects);

  // Collect subjects into hidden field
  function updateSubjects() {
    let selected = Array.from(checkboxes)
      .filter(c => c.checked)
      .map(c => c.value);
    if (selected.includes('Other') && otherInput.value.trim()) {
      selected[selected.indexOf('Other')] = `Other: ${otherInput.value.trim()}`;
    }
    subjectsInput.value = selected.join(', ');
  }

  // Form submission
  form.addEventListener('submit', async e => {
    e.preventDefault();
    updateSubjects();

    try {
      const formData = new FormData(form);
      const res = await fetch("https://formspree.io/f/mvgqwywl", {
        method: "POST",
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (res.ok) {
        message.textContent = "✅ Application sent successfully!";
        message.className = "success";
        message.style.display = "block";
        form.reset();
        subjectsInput.value = "";
        otherInput.style.display = "none";
      } else {
        throw new Error("Form submission failed");
      }
    } catch (err) {
      message.textContent = "❌ Error sending application. Please try again.";
      message.className = "error";
      message.style.display = "block";
    }
  });
</script>

</body>
</html>
