<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Teacher Recruitment Form</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: auto;
    background: #f8f8f8;
    padding: 20px;
  }
  label { font-weight: bold; display: block; margin-top: 10px; }
  input, select {
    width: 100%;
    padding: 10px;
    margin-top: 4px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  button {
    margin-top: 15px;
    background: green;
    color: white;
    padding: 12px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    border-radius: 6px;
  }
  button:hover { background: darkgreen; }
  .subjects-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  .subject-card {
    background: #f87171;
    color: white;
    font-weight: bold;
    padding: 12px 16px;
    border-radius: 12px;
    cursor: pointer;
    flex: 1 1 calc(50% - 10px);
    min-width: 120px;
    transition: background 0.2s ease;
    text-align: center;
  }
  .subject-card.selected { background: #dc2626; }
  #message {
    margin-top: 15px;
    padding: 10px;
    display: none;
    border-radius: 6px;
  }
  #message.success { background: #d1fae5; color: #065f46; }
  #message.error { background: #fee2e2; color: #991b1b; }
</style>
</head>
<body>

<h2>Teacher Recruitment Form</h2>
<form id="teacherForm">
  <label>Full Name *</label>
  <input type="text" name="name" required>

  <label>Email *</label>
  <input type="email" name="email" required>

  <label>Phone Number *</label>
  <input type="tel" name="phone" required>

  <label>Type of School Graduated From *</label>
  <select name="schoolType" id="schoolType" required>
    <option value="">-- Select --</option>
    <option value="University">University</option>
    <option value="Polytechnic">Polytechnic</option>
  </select>

  <label>School Name *</label>
  <input type="text" name="schoolName" required>

  <label>Grade *</label>
  <select name="grade" id="grade" required>
    <option value="">-- Select Grade --</option>
  </select>

  <label>Subjects you can teach *</label>
  <div class="subjects-container" id="subjectsList">
    <div class="subject-card" data-value="Mathematics">Mathematics</div>
    <div class="subject-card" data-value="Physics">Physics</div>
    <div class="subject-card" data-value="Engineering">Engineering</div>
    <div class="subject-card" data-value="Further Mathematics">Further Mathematics</div>
    <div class="subject-card" data-value="Other">Other</div>
  </div>

  <input id="otherSubject" type="text" placeholder="Specify other subject" style="margin-top:8px; display:none;">
  <input type="hidden" name="subjects" id="subjectsInput" required>

  <label>Fee per hour (₦) *</label>
  <input type="number" name="fee" min="2000" max="4000" required>

  <label>CV (filename only for now) *</label>
  <input type="text" name="cv" placeholder="Enter CV filename" required>

  <button type="submit">Submit Application</button>
  <div id="message"></div>
</form>

<script>
  const gradeSelect = document.getElementById('grade');
  const schoolType = document.getElementById('schoolType');
  const subjectCards = document.querySelectorAll('.subject-card');
  const otherInput = document.getElementById('otherSubject');
  const subjectsInput = document.getElementById('subjectsInput');
  const form = document.getElementById('teacherForm');
  const message = document.getElementById('message');

  // School type change → update grade options
  schoolType.addEventListener('change', () => {
    gradeSelect.innerHTML = '<option value="">-- Select Grade --</option>';
    if (schoolType.value === 'University') {
      ['First Class', 'Second Class Upper', 'Second Class Lower', 'Third Class'].forEach(g => {
        gradeSelect.innerHTML += `<option value="${g}">${g}</option>`;
      });
    } else if (schoolType.value === 'Polytechnic') {
      ['Distinction', 'Upper Credit', 'Lower Credit'].forEach(g => {
        gradeSelect.innerHTML += `<option value="${g}">${g}</option>`;
      });
    }
  });

  // Subject selection logic
  subjectCards.forEach(card => {
    card.addEventListener('click', () => {
      card.classList.toggle('selected');
      if (card.dataset.value === 'Other') {
        otherInput.style.display = card.classList.contains('selected') ? 'block' : 'none';
      }
      updateSubjects();
    });
  });
  otherInput.addEventListener('input', updateSubjects);

  function updateSubjects() {
    let selected = Array.from(subjectCards)
      .filter(c => c.classList.contains('selected'))
      .map(c => c.dataset.value);
    if (selected.includes('Other') && otherInput.value.trim()) {
      selected[selected.indexOf('Other')] = `Other: ${otherInput.value.trim()}`;
    }
    subjectsInput.value = selected.join(', ');
  }

  // Form submission
  form.addEventListener('submit', async e => {
    e.preventDefault();
    updateSubjects(); // make sure latest is saved

    try {
      const formData = new FormData(form);
      const res = await fetch("https://formspree.io/f/mvgqwywl", {
        method: "POST",
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (res.ok) {
        message.textContent = "✅ Application sent successfully!";
        message.className = "success";
        message.style.display = "block";
        form.reset();
        subjectsInput.value = "";
        otherInput.style.display = "none";
        subjectCards.forEach(c => c.classList.remove('selected'));
      } else {
        throw new Error("Form submission failed");
      }
    } catch (err) {
      message.textContent = "❌ Error sending application. Please try again.";
      message.className = "error";
      message.style.display = "block";
    }
  });
</script>

</body>
</html>
